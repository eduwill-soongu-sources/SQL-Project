-- 기존에 테이블이 있을 경우를 대비해 삭제하는 구문 (오류가 나도 괜찮습니다)
DROP TABLE IF EXISTS Order_Details;
DROP TABLE IF EXISTS Orders;
DROP TABLE IF EXISTS Products;
DROP TABLE IF EXISTS Customers;

-- 1. Customers (고객) 테이블
-- 고객의 기본 정보를 저장합니다.
CREATE TABLE Customers (
    customer_id INTEGER PRIMARY KEY AUTOINCREMENT, -- 고객 고유 ID
    customer_name TEXT NOT NULL,                   -- 고객 이름
    email TEXT NOT NULL UNIQUE,                    -- 이메일 (고유해야 함)
    join_date TEXT NOT NULL                        -- 가입일 (YYYY-MM-DD 형식)
);


-- 2. Products (상품) 테이블
-- 판매하는 상품의 정보를 저장합니다. 'category'와 'price'는 GROUP BY 연습에 핵심적입니다.
CREATE TABLE Products (
    product_id INTEGER PRIMARY KEY AUTOINCREMENT, -- 상품 고유 ID
    product_name TEXT NOT NULL,                   -- 상품명
    category TEXT NOT NULL,                       -- 카테고리 (예: '전자제품', '의류')
    price INTEGER NOT NULL,                       -- 가격
    stock INTEGER NOT NULL DEFAULT 0              -- 재고 수량
);


-- 3. Orders (주문) 테이블
-- 고객의 주문 정보를 저장합니다. 누가, 언제 주문했는지에 대한 '주문 대표 정보'입니다.
CREATE TABLE Orders (
    order_id INTEGER PRIMARY KEY AUTOINCREMENT,    -- 주문 고유 ID
    customer_id INTEGER NOT NULL,                  -- 주문한 고객 ID (Customers 테이블 참조)
    order_date TEXT NOT NULL,                      -- 주문일 (YYYY-MM-DD 형식)
    status TEXT NOT NULL,                          -- 주문 상태 (예: '주문완료', '배송중')
    FOREIGN KEY (customer_id) REFERENCES Customers(customer_id) -- 외래 키 설정
);


-- 4. Order_Details (주문 상세) 테이블
-- 특정 주문에 어떤 상품이 몇 개나 포함되었는지를 저장합니다. Orders와 Products를 연결하는 핵심 테이블입니다.
CREATE TABLE Order_Details (
    order_detail_id INTEGER PRIMARY KEY AUTOINCREMENT, -- 주문 상세 고유 ID
    order_id INTEGER NOT NULL,                         -- 주문 ID (Orders 테이블 참조)
    product_id INTEGER NOT NULL,                       -- 상품 ID (Products 테이블 참조)
    quantity INTEGER NOT NULL,                         -- 주문 수량
    FOREIGN KEY (order_id) REFERENCES Orders(order_id),       -- 외래 키 설정
    FOREIGN KEY (product_id) REFERENCES Products(product_id) -- 외래 키 설정
);



-- 여러 INSERT 문을 하나의 트랜잭션으로 묶어서 실행 속도를 높입니다.
BEGIN TRANSACTION;

-- 1. Customers (고객) 데이터 삽입
INSERT INTO Customers (customer_id, customer_name, email, join_date) VALUES
(1, '김철수', 'kim.chulsoo@example.com', '2023-01-15'),
(2, '박영희', 'park.younghee@example.com', '2023-02-10'),
(3, '이민준', 'lee.minjun@example.com', '2023-03-22'),
(4, '최지아', 'choi.jia@example.com', '2023-04-05'),
(5, '정수빈', 'jung.subin@example.com', '2023-05-30'),
(6, '윤서연', 'yoon.seoyeon@example.com', '2023-06-18'),
(7, '한지훈', 'han.jihoon@example.com', '2024-07-21'),
(8, '강하은', 'kang.haeun@example.com', '2024-08-09'),
(9, '서준우', 'seo.junwoo@example.com', '2024-09-01'),
(10, '황보민', 'hwang.bomin@example.com', '2024-10-11'),
(11, '송다은', 'song.daeun@example.com', '2024-11-20'),
(12, '임도현', 'lim.dohyun@example.com', '2024-12-01'),
(13, '나하나', 'na.hana@example.com', '2025-01-03'),
(14, '유재석', 'yoo.jaeseok@example.com', '2025-02-11'),
(15, '박나래', 'park.narae@example.com', '2025-03-15');

-- 2. Products (상품) 데이터 삽입
INSERT INTO Products (product_id, product_name, category, price, stock) VALUES
(101, '노트북', '전자제품', 1200000, 50),
(102, '스마트폰', '전자제품', 800000, 100),
(103, '무선 이어폰', '전자제품', 150000, 200),
(104, '모니터', '전자제품', 300000, 70),
(105, '티셔츠', '의류', 25000, 300),
(106, '청바지', '의류', 50000, 150),
(107, '운동화', '의류', 75000, 120),
(108, 'SQL 첫걸음', '도서', 18000, 500),
(109, '파이썬 데이터 분석', '도서', 22000, 400),
(110, '요리책', '도서', 15000, 250),
(111, '유기농 샐러드', '식품', 8000, 1000),
(112, '닭가슴살 팩', '식품', 5000, 800),
(113, '프로틴바', '식품', 2500, 1200),
(114, 'USB-C 허브', '전자제품', 45000, 90),
(115, '가디건', '의류', 60000, 110),
(116, '정보처리기사 필기', '도서', 28000, 350),
(117, '고급 기계식 키보드', '전자제품', 180000, 30), 
(118, '프랑스 자수 세트', '취미', 42000, 50),
(119, '에어프라이어', '주방용품', 89000, 80),
(120, '커피머신', '주방용품', 129000, 60),
(121, '맨투맨', '의류', 35000, 250),
(122, '정보처리기사 실기', '도서', 31000, 300),
(123, '4K 웹캠', '전자제품', 99000, 75),
(124, '유기농 사과즙', '식품', 19000, 500);

-- 3. Orders (주문) 데이터 삽입
INSERT INTO Orders (order_id, customer_id, order_date, status) VALUES
(1001, 1, '2024-05-01', '배송완료'),
(1002, 2, '2024-05-03', '배송완료'),
(1003, 1, '2024-05-05', '배송중'),
(1004, 3, '2024-05-06', '주문완료'),
(1005, 5, '2024-05-10', '배송완료'),
(1006, 2, '2024-06-02', '배송완료'),
(1007, 7, '2024-06-15', '배송중'),
(1008, 1, '2024-07-01', '배송완료'),
(1009, 4, '2024-08-08', '주문완료'),
(1010, 6, '2024-09-10', '배송완료'),
(1011, 8, '2024-10-21', '배송완료'),
(1012, 9, '2024-11-05', '배송완료'),
(1013, 2, '2024-12-25', '배송중'),
(1014, 5, '2025-01-07', '배송완료'),
(1015, 1, '2025-02-14', '주문완료'),
(1016, 5, '2025-02-20', '배송완료'),
(1017, 3, '2025-03-01', '배송완료'),
(1018, 7, '2025-03-05', '배송중'),
(1019, 2, '2025-04-10', '배송완료'),
(1020, 5, '2025-05-01', '주문완료'),
(1021, 1, '2025-05-03', '배송중'),
(1022, 8, '2025-05-08', '배송완료'),
(1023, 5, '2025-05-12', '배송완료'),
(1024, 11, '2025-01-15', '배송완료'),
(1025, 13, '2025-01-20', '배송완료'),
(1026, 4, '2025-02-18', '배송중'),
(1027, 1, '2025-03-10', '배송완료'),  
(1028, 12, '2025-03-21', '주문완료'),
(1029, 13, '2025-04-05', '배송완료'), 
(1030, 2, '2025-04-08', '배송완료'),  
(1031, 14, '2025-04-11', '배송중'),
(1032, 15, '2025-04-15', '주문완료'),
(1033, 5, '2025-05-01', '배송완료'),  
(1034, 13, '2025-05-02', '배송완료'), 
(1035, 1, '2025-05-20', '배송중');    

-- 4. Order_Details (주문 상세) 데이터 삽입
INSERT INTO Order_Details (order_detail_id, order_id, product_id, quantity) VALUES
(2001, 1001, 101, 1),
(2002, 1001, 114, 1),
(2003, 1002, 105, 2),
(2004, 1002, 107, 1),
(2005, 1003, 109, 1),
(2006, 1004, 112, 10),
(2007, 1005, 102, 1),
(2008, 1005, 103, 1),
(2009, 1006, 108, 2),
(2010, 1006, 116, 1),
(2011, 1007, 106, 1),
(2012, 1008, 111, 5),
(2013, 1008, 113, 10),
(2014, 1009, 107, 1),
(2015, 1010, 115, 1),
(2016, 1011, 104, 1),
(2017, 1012, 110, 1),
(2018, 1013, 105, 5),
(2019, 1014, 101, 1),
(2020, 1015, 103, 2),
(2021, 1016, 106, 1),
(2022, 1016, 107, 1),
(2023, 1017, 109, 1),
(2024, 1018, 112, 20),
(2025, 1019, 102, 1),
(2026, 1020, 115, 2),
(2027, 1021, 116, 2),
(2028, 1022, 108, 1),
(2029, 1023, 105, 3),
(2030, 1023, 113, 5),
(2031, 1024, 119, 1), 
(2032, 1025, 121, 2), 
(2033, 1025, 106, 1), 
(2034, 1026, 122, 1), 
(2035, 1027, 102, 1), 
(2036, 1028, 111, 10),
(2037, 1029, 123, 1), 
(2038, 1029, 114, 1), 
(2039, 1030, 105, 5), 
(2040, 1030, 106, 3), 
(2041, 1030, 121, 4), 
(2042, 1031, 120, 1), 
(2043, 1032, 124, 2), 
(2044, 1033, 113, 30),
(2045, 1034, 108, 1), 
(2046, 1034, 109, 1), 
(2047, 1034, 122, 1), 
(2048, 1035, 103, 1), 
(2049, 1035, 123, 1); 


COMMIT;

